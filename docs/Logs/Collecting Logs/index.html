<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Logs/Collecting Logs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Collecting Logs | Fluentd docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://abdulloh4090.github.io/Fluentd/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://abdulloh4090.github.io/Fluentd/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://abdulloh4090.github.io/Fluentd/docs/Logs/Collecting Logs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Collecting Logs | Fluentd docs"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/Fluentd/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://abdulloh4090.github.io/Fluentd/docs/Logs/Collecting Logs"><link data-rh="true" rel="alternate" href="https://abdulloh4090.github.io/Fluentd/docs/Logs/Collecting Logs" hreflang="en"><link data-rh="true" rel="alternate" href="https://abdulloh4090.github.io/Fluentd/docs/Logs/Collecting Logs" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Collecting Logs","item":"https://abdulloh4090.github.io/Fluentd/docs/Logs/Collecting Logs"}]}</script><link rel="alternate" type="application/rss+xml" href="/Fluentd/blog/rss.xml" title="Fluentd docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Fluentd/blog/atom.xml" title="Fluentd docs Atom Feed"><link rel="stylesheet" href="/Fluentd/assets/css/styles.ba795a2b.css">
<script src="/Fluentd/assets/js/runtime~main.d07828c5.js" defer="defer"></script>
<script src="/Fluentd/assets/js/main.4b2e52e3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Fluentd/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Fluentd/"><div class="navbar__logo"><img src="/Fluentd/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Fluentd/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Fluentd</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Fluentd/docs/Logs/Collecting Logs">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Fluentd/docs/Logs/Collecting Logs">Logs</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Fluentd/docs/Logs/Collecting Logs">Collecting Logs</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Fluentd/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Logs</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Collecting Logs</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Collecting Logs</h1></header>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>if you want to collect and route logs - use Fluentd agent</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Fluentd is a fully free and fully open-source log collector that instantly enables you to have a Log Everything&#x27; architecture with <a href="https://www.fluentd.org/plugins" target="_blank" rel="noopener noreferrer">125+ types of systems.</a></p>
<p>You can visit <a href="https://www.fluentd.org/" target="_blank" rel="noopener noreferrer">official site</a></p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/Fluentd/assets/images/fluentd-architecture-47b81be98e829cf44720ddcaab7a477e.png" width="892" height="560" class="img_ev3q"></p>
<p>Fluentd treats logs as JSON, a popular machine-readable format. It is written primarily in C with a thin-Ruby wrapper that gives users flexibility.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<p>To successfully install and run Fluentd on your system, the following software and hardware requirements must be met:</p>
<ol>
<li><strong>CPU and RAM</strong>
Minimum: 1 vCPU, 512MB RAM
Recommended: 2+ vCPUs, 2GB+ RAM (for handling large log volumes)</li>
<li><strong>Disk Space</strong>
At least 1GB of free disk space (for logs and buffer files)
SSD is recommended for faster disk I/O performance</li>
</ol>
<p>To use the td-agent (Fluentd’s stable production version), you can install it using the official installation script:</p>
<p>Step-by-step:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -fsSL https://toolbelt.treasuredata.com/sh/install-ubuntu-focal-td-agent4.sh | sh</span><br></span></code></pre></div></div>
<p>Replace <code>ubuntu-focal</code> with your OS version (e.g., <code>centos7</code>, <code>debian-buster</code>, etc.)</p>
<p>After installation is complete, you can verify it with:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">td-agent --version</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tail-plugin">Tail plugin<a href="#tail-plugin" class="hash-link" aria-label="Direct link to Tail plugin" title="Direct link to Tail plugin">​</a></h3>
<blockquote>
<p>The <code>in_tail</code> Input plugin allows Fluentd to read events from the tail of text files. Its behavior is similar to the <code>tail -F</code> command. Each log is collected throughout <code>&lt;source&gt; &lt;/source&gt;</code></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eample-configuration">Eample Configuration<a href="#eample-configuration" class="hash-link" aria-label="Direct link to Eample Configuration" title="Direct link to Eample Configuration">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type tail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  path /var/log/json.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pos_file /fluentd/logs/json.pos</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  tag json.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @type json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/source&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h3>
<p>When Fluentd is first configured with <code>in_tail</code>, it will start reading from the <em><strong>tail</strong></em> of that log, not the beginning. Once the log is rotated, Fluentd starts reading the new file from the beginning. It keeps track of the current inode number.</p>
<p>If <code>td-agent</code> restarts, it resumes reading from the last position before the restart. This position is recorded in the position file specified by the <code>pos_file </code>parameter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reading-json-apache-syslog-logs">Reading JSON, Apache, Syslog Logs<a href="#reading-json-apache-syslog-logs" class="hash-link" aria-label="Direct link to Reading JSON, Apache, Syslog Logs" title="Direct link to Reading JSON, Apache, Syslog Logs">​</a></h3>
<p>To read logs from Json, Apache, Syslog etc. You need to follow below steps. In addition to this, these step will be similir to other sources. Once you learn these steps other steps will be easier.</p>
<ol>
<li>JSON / Apche / Syslog Logs Source:</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type tail </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  path /var/log/json.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pos_file /fluentd/logs/json.pos</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  tag json.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @type json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type tail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  path /var/log/apache.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pos_file /fluentd/logs/apache.pos</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  tag apache.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @type apache2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type tail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  path /var/log/syslog.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pos_file /fluentd/logs/syslog.pos</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  tag syslog.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @type syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/parse&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/source&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;filter json.log&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type record_transformer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_ruby true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;record&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Timestamp ${Time.at(time.to_i).utc.strftime(&#x27;%Y-%m-%dT%H:%M:%SZ&#x27;)}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Level ${record[&quot;level&quot;] || &quot;Info&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Message ${record[&quot;message&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Source ${record[&quot;source&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SourceIp &quot;#{Socket.ip_address_list.detect(&amp;:ipv4_private?)&amp;.ip_address}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LogPath /var/log/json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tag json_logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/record&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/filter&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;filter apache.log&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type record_transformer </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_ruby true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;record&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Timestamp ${Time.at(time.to_i).utc.strftime(&#x27;%Y-%m-%dT%H:%M:%SZ&#x27;)}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Level ${record[&quot;level&quot;] || &quot;Info&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Message ${record[&quot;message&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Source ${record[&quot;source&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SourceIp &quot;#{Socket.ip_address_list.detect(&amp;:ipv4_private?)&amp;.ip_address}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LogPath /var/log/apache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tag apache_logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/record&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/filter&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;filter syslog.log&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type record_transformer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_ruby true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;record&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Timestamp ${Time.at(time.to_i).utc.strftime(&#x27;%Y-%m-%dT%H:%M:%SZ&#x27;)}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Level ${record[&quot;level&quot;] || &quot;Info&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Message ${record[&quot;message&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Source ${record[&quot;source&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SourceIp &quot;#{Socket.ip_address_list.detect(&amp;:ipv4_private?)&amp;.ip_address}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LogPath /var/log/syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tag syslog_logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/record&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/filter&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;match *.log&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @type stdout</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/match&gt;</span><br></span></code></pre></div></div>
<p><code>@type</code> tail Reads log entries from a file.</p>
<p><code>path</code> Location of the <code>json.log</code> file.</p>
<p><code>pos_file</code> Stores the position of the last read line to ensure Fluentd picks up from the same place after restart.</p>
<p><code>tag</code> Used to route events in the pipeline.</p>
<p><code>parse</code> in Fluentd is used to convert raw log lines into structured data using predefined or custom formats like <code>json</code>, <code>regexp</code>, or <code>apache2</code>.</p>
<p><code>enable_rubly</code> allows you to write Ruby code inside <code>&lt;record&gt;</code> blocks. When set to <code>true</code>, Ruby expressions like <code>#{}</code> are evaluated. <code>&lt;record&gt; &lt;record&gt;</code> block is used to <strong>add custom fields</strong> to each log event. These fields are <strong>appended</strong> to the output of the log pipeline (e.g., to file, stdout, Elasticsearch, etc.).</p>
<p><code>Timestamp</code> Converts Fluentd&#x27;s event time to ISO 8601 UTC format.</p>
<p><code>Level</code> Defaults to <code>&quot;Inf&quot;o&quot;</code>if not specified in the log.</p>
<p><code>Message</code>, <code>Source</code> Extracted directly from the log record.</p>
<p><code>SourceIp</code> Dynamically detects and embeds the host&#x27;s internal IP address.</p>
<p><code>LogPath</code> Hardcoded to identify the source directory.</p>
<p><code>tag</code> Provides a secondary tag for downstream identification (not used for routing here). The same structure is applied to Apache and Syslog filters with minor differences in <code>LogPath</code> and tag.</p>
<p><code>&lt;match&gt; </code> Captures all events with a tag ending in <code>.log</code>.</p>
<p><code>stdout</code> Outputs the final log record to the standard output, useful for debugging or Docker logging.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-run-with-docker">How to Run with Docker<a href="#how-to-run-with-docker" class="hash-link" aria-label="Direct link to How to Run with Docker" title="Direct link to How to Run with Docker">​</a></h3>
<p>You can run this Fluentd configuration in a Docker container using the following steps:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="project-structure">Project Structure:<a href="#project-structure" class="hash-link" aria-label="Direct link to Project Structure:" title="Direct link to Project Structure:">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Fluentd_Task/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── fluent.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── logs/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── json.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── apache.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── syslog.log</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-run-command">Docker Run Command:<a href="#docker-run-command" class="hash-link" aria-label="Direct link to Docker Run Command:" title="Direct link to Docker Run Command:">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name fluentd-log-aggregator \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -v &quot;$(pwd)/fluent.conf:/fluentd/etc/fluent.conf&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -v &quot;$(pwd)/logs:/var/log&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 9880:9880 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fluent/fluentd:v1.16-</span><br></span></code></pre></div></div>
<p><code>-v</code> mounts the local configuration and logs directory into the container.</p>
<ul>
<li>Logs written to <code>logs/</code> will be tailed by Fluentd in real-time.</li>
<li>Use <code>docker logs -f fluentd-log-aggregator</code> to monitor the Fluentd output.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-samples">Log Samples<a href="#log-samples" class="hash-link" aria-label="Direct link to Log Samples" title="Direct link to Log Samples">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="json-log-jsonlog">JSON Log (<code>json.log</code>):<a href="#json-log-jsonlog" class="hash-link" aria-label="Direct link to json-log-jsonlog" title="Direct link to json-log-jsonlog">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;level&quot;: &quot;warn&quot;, &quot;message&quot;: &quot;User login failed&quot;, &quot;source&quot;: &quot;auth-service&quot;}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="apache-log-apachelog">Apache Log (<code>apache.log</code>):<a href="#apache-log-apachelog" class="hash-link" aria-label="Direct link to apache-log-apachelog" title="Direct link to apache-log-apachelog">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1 - - [10/Jul/2025:09:00:00 +0000] &quot;GET /index.html HTTP/1.1&quot; 200 612</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syslog-log-sysloglog">Syslog Log (<code>syslog.log</code>):<a href="#syslog-log-sysloglog" class="hash-link" aria-label="Direct link to syslog-log-sysloglog" title="Direct link to syslog-log-sysloglog">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;34&gt;Jul 10 09:02:30 server-name sshd[1234]: Failed password for invalid user</span><br></span></code></pre></div></div>
<p>These logs will be parsed and transformed into structured events with unified fields like <code>Timestamp</code>, <code>Message</code>, <code>Level</code>, etc.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Logs/Collecting Logs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a><ul><li><a href="#tail-plugin" class="table-of-contents__link toc-highlight">Tail plugin</a></li><li><a href="#eample-configuration" class="table-of-contents__link toc-highlight">Eample Configuration</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#reading-json-apache-syslog-logs" class="table-of-contents__link toc-highlight">Reading JSON, Apache, Syslog Logs</a></li><li><a href="#how-to-run-with-docker" class="table-of-contents__link toc-highlight">How to Run with Docker</a></li><li><a href="#log-samples" class="table-of-contents__link toc-highlight">Log Samples</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>